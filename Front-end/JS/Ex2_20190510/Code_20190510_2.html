<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <style media="screen" type="text/css">

    </style>
  </head>
  <body>
    <form class="" action="123.html" method="post" onsubmit="return formCheck()">
      <p>账    号: <input type="text" id="user" /></p>
      <p>密    码: <input type="text" id="pswd" /></p>
      <p>确认密码: <input type="text" id="pswdCheck" /></p>
      <input type="submit" value="提交"/>
    </form>
  </body>
  <script type="text/javascript">
    window.onkeydown=function(e){    //event事件对象
  		// alert("hello");
  		// alert(arguments.length)   //1
  		// alert(arguments[0])    //object KeyboardEvent
  		// alert(e.type)   //type事件类型
  		// alert(e.keyCode)  //keyCode键盘编码
      if (e.keyCode == 13) {
        formCheck();
      }
      if (e.keyCode == 27) {
        // window.close();
        closeCurrentPage();
      }
    }
    function pswdLengthCheck() {
      var pswd = document.getElementById("pswd").value;
      if (pswd.length < 1) {
        alert("密码不能为空");
        return false;
      }
      //   if (pswd.length < 6) {
      //     alert("请输入大于6位密码");
      //     return false;
      //   }
    }
    function secondaryPasswordCheck() {
      var pswd = document.getElementById("pswd").value;
      var pswdCheck = document.getElementById("pswdCheck").value;
      if (pswd != pswdCheck) {
        alert("两次输入的密码不一致");
        return false;
      }
    }
    function pswdCheckModule() {
      // alert("1");
      // pswdLengthCheck();
      // alert("输入长度大于6位");
      // secondaryPasswordCheck();

      if (pswdLengthCheck() == false) {
        return false;
      }
      if (secondaryPasswordCheck() == false) {
        return false;
      }
    }
    // function pswdCheckFunc() {
    //   var pswd = document.getElementById("pswd").value;
    //   var pswdCheck = document.getElementById("pswdCheck").value;
    //   if (pswd.length < 6) {
    //     alert("请输入大于6位密码");
    //     return false;
    //   }
    //   if (pswd != pswdCheck) {
    //     alert("两次输入的密码不一致");
    //     return false;
    //   }
    // }
    function accountEmailCheck() {
      var user = document.getElementById("user").value;
      if (user.length < 1) {
        alert("请输入账号");
        return false;
      }

      // var myforms = document.forms;
      // var myemail = myforms[0].email.value;
      // var myReg = /^[a-zA-Z0-9_-] + @([a-zA-Z0-9] + \.) + (com | cn | net | org) $/;
      // if (myReg.test(myemail)) {
      //   return true;
      // } else {
      //   myspan.innerText = "邮箱格式不对";
      //   return false;
      // }

      // var user = document.getElementById("user").value;
      // var re = /^(\w-*\.*) + @(\w-?) + (\.\w{2,}) + $/;
      // if (re.text(user)) {
      //   alert("正确");
      // } else {
      //   alert("错误");
      // }
    }
    function formCheck() {
      if (accountEmailCheck() == false) {
        return false;
      }
      if (pswdCheckModule() == false) {
        return false;
      }
    }
    function closeCurrentPage() {
      var userAgent = navigator.userAgent;
      if (userAgent.indexOf("Firefox") != -1 || userAgent.indexOf("Chrome") != -1) {
        window.location.href = "about:blank";
        window.close();
      }
      else {
        if (confirm("您确定要关闭本页吗？")) {
          window.opener = null;
          window.open('','_self');
          window.close();
        }
      }
    }
  </script>
</html>
